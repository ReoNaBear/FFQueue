import{al as U,g as k,r as A,a0 as R,e as V,Z as P,ah as Z,w as x,I as H,o as z,d as G,am as y,a3 as J,m as _,c as F,aa as K,h as ee}from"./index-gjx5i3Ov.js";import{p as j,i as te,s as ie,h as ne,q as le,t as oe}from"./scroll-NNl9UgnC.js";function re(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),U.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const ae={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},ge={...ae,contextMenu:Boolean};function pe({showing:e,avoidEmit:n,configureAnchorEl:i}){const{props:t,proxy:o,emit:c}=k(),r=A(null);let d=null;function s(l){return r.value===null?!1:l===void 0||l.touches===void 0||l.touches.length<=1}const a={};i===void 0&&(Object.assign(a,{hide(l){o.hide(l)},toggle(l){o.toggle(l),l.qAnchorHandled=!0},toggleKey(l){Z(l,13)===!0&&a.toggle(l)},contextClick(l){o.hide(l),R(l),P(()=>{o.show(l),l.qAnchorHandled=!0})},prevent:R,mobileTouch(l){if(a.mobileCleanup(l),s(l)!==!0)return;o.hide(l),r.value.classList.add("non-selectable");const u=l.target;V(a,"anchor",[[u,"touchmove","mobileCleanup","passive"],[u,"touchend","mobileCleanup","passive"],[u,"touchcancel","mobileCleanup","passive"],[r.value,"contextmenu","prevent","notPassive"]]),d=setTimeout(()=>{d=null,o.show(l),l.qAnchorHandled=!0},300)},mobileCleanup(l){r.value.classList.remove("non-selectable"),d!==null&&(clearTimeout(d),d=null),e.value===!0&&l!==void 0&&re()}}),i=function(l=t.contextMenu){if(t.noParentEvent===!0||r.value===null)return;let u;l===!0?o.$q.platform.is.mobile===!0?u=[[r.value,"touchstart","mobileTouch","passive"]]:u=[[r.value,"mousedown","hide","passive"],[r.value,"contextmenu","contextClick","notPassive"]]:u=[[r.value,"click","toggle","passive"],[r.value,"keyup","toggleKey","passive"]],V(a,"anchor",u)});function f(){G(a,"anchor")}function h(l){for(r.value=l;r.value.classList.contains("q-anchor--skip");)r.value=r.value.parentNode;i()}function g(){if(t.target===!1||t.target===""||o.$el.parentNode===null)r.value=null;else if(t.target===!0)h(o.$el.parentNode);else{let l=t.target;if(typeof t.target=="string")try{l=document.querySelector(t.target)}catch{l=void 0}l!=null?(r.value=l.$el||l,i()):(r.value=null,console.error(`Anchor: target "${t.target}" not found`))}}return x(()=>t.contextMenu,l=>{r.value!==null&&(f(),i(l))}),x(()=>t.target,()=>{r.value!==null&&f(),g()}),x(()=>t.noParentEvent,l=>{r.value!==null&&(l===!0?f():i())}),H(()=>{g(),n!==!0&&t.modelValue===!0&&r.value===null&&c("update:modelValue",!1)}),z(()=>{d!==null&&clearTimeout(d),f()}),{anchorEl:r,canShow:s,anchorEvents:a}}function be(e,n){const i=A(null);let t;function o(d,s){const a=`${s!==void 0?"add":"remove"}EventListener`,f=s!==void 0?s:t;d!==window&&d[a]("scroll",f,y.passive),window[a]("scroll",f,y.passive),t=s}function c(){i.value!==null&&(o(i.value),i.value=null)}const r=x(()=>e.noParentEvent,()=>{i.value!==null&&(c(),n())});return z(r),{localScrollTarget:i,unconfigureScrollTarget:c,changeScrollEvent:o}}const{notPassiveCapture:W}=y,b=[];function L(e){const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let i=j.length-1;for(;i>=0;){const t=j[i].$;if(t.type.name==="QTooltip"){i--;continue}if(t.type.name!=="QDialog")break;if(t.props.seamless!==!0)return;i--}for(let t=b.length-1;t>=0;t--){const o=b[t];if((o.anchorEl.value===null||o.anchorEl.value.contains(n)===!1)&&(n===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(n)===!1))e.qClickOutside=!0,o.onClickOutside(e);else return}}function xe(e){b.push(e),b.length===1&&(document.addEventListener("mousedown",L,W),document.addEventListener("touchstart",L,W))}function ye(e){const n=b.findIndex(i=>i===e);n!==-1&&(b.splice(n,1),b.length===0&&(document.removeEventListener("mousedown",L,W),document.removeEventListener("touchstart",L,W)))}let B,Q;function we(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ee(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const $={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{$[`${e}#ltr`]=e,$[`${e}#rtl`]=e});function Te(e,n){const i=e.split(" ");return{vertical:i[0],horizontal:$[`${i[1]}#${n===!0?"rtl":"ltr"}`]}}function se(e,n){let{top:i,left:t,right:o,bottom:c,width:r,height:d}=e.getBoundingClientRect();return n!==void 0&&(i-=n[1],t-=n[0],c+=n[1],o+=n[0],r+=n[0],d+=n[1]),{top:i,bottom:c,height:d,left:t,right:o,width:r,middle:t+(o-t)/2,center:i+(c-i)/2}}function ue(e,n,i){let{top:t,left:o}=e.getBoundingClientRect();return t+=n.top,o+=n.left,i!==void 0&&(t+=i[1],o+=i[0]),{top:t,bottom:t+1,height:1,left:o,right:o+1,width:1,middle:o,center:t}}function ce(e,n){return{top:0,center:n/2,bottom:n,left:0,middle:e/2,right:e}}function N(e,n,i,t){return{top:e[i.vertical]-n[t.vertical],left:e[i.horizontal]-n[t.horizontal]}}function de(e,n=0){if(e.targetEl===null||e.anchorEl===null||n>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{de(e,n+1)},10);return}const{targetEl:i,offset:t,anchorEl:o,anchorOrigin:c,selfOrigin:r,absoluteOffset:d,fit:s,cover:a,maxHeight:f,maxWidth:h}=e;if(J.is.ios===!0&&window.visualViewport!==void 0){const S=document.body.style,{offsetLeft:E,offsetTop:p}=window.visualViewport;E!==B&&(S.setProperty("--q-pe-left",E+"px"),B=E),p!==Q&&(S.setProperty("--q-pe-top",p+"px"),Q=p)}const{scrollLeft:g,scrollTop:l}=i,u=d===void 0?se(o,a===!0?[0,0]:t):ue(o,d,t);Object.assign(i.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h,maxHeight:f,visibility:"visible"});const{offsetWidth:q,offsetHeight:M}=i,{elWidth:X,elHeight:Y}=s===!0||a===!0?{elWidth:Math.max(u.width,q),elHeight:a===!0?Math.max(u.height,M):M}:{elWidth:q,elHeight:M};let v={maxWidth:h,maxHeight:f};(s===!0||a===!0)&&(v.minWidth=u.width+"px",a===!0&&(v.minHeight=u.height+"px")),Object.assign(i.style,v);const w=ce(X,Y);let m=N(u,w,c,r);if(d===void 0||t===void 0)C(m,u,w,c,r);else{const{top:S,left:E}=m;C(m,u,w,c,r);let p=!1;if(m.top!==S){p=!0;const T=2*t[1];u.center=u.top-=T,u.bottom-=T+2}if(m.left!==E){p=!0;const T=2*t[0];u.middle=u.left-=T,u.right-=T+2}p===!0&&(m=N(u,w,c,r),C(m,u,w,c,r))}v={top:m.top+"px",left:m.left+"px"},m.maxHeight!==void 0&&(v.maxHeight=m.maxHeight+"px",u.height>m.maxHeight&&(v.minHeight=v.maxHeight)),m.maxWidth!==void 0&&(v.maxWidth=m.maxWidth+"px",u.width>m.maxWidth&&(v.minWidth=v.maxWidth)),Object.assign(i.style,v),i.scrollTop!==l&&(i.scrollTop=l),i.scrollLeft!==g&&(i.scrollLeft=g)}function C(e,n,i,t,o){const c=i.bottom,r=i.right,d=te(),s=window.innerHeight-d,a=document.body.clientWidth;if(e.top<0||e.top+c>s)if(o.vertical==="center")e.top=n[t.vertical]>s/2?Math.max(0,s-c):0,e.maxHeight=Math.min(c,s);else if(n[t.vertical]>s/2){const f=Math.min(s,t.vertical==="center"?n.center:t.vertical===o.vertical?n.bottom:n.top);e.maxHeight=Math.min(c,f),e.top=Math.max(0,f-c)}else e.top=Math.max(0,t.vertical==="center"?n.center:t.vertical===o.vertical?n.top:n.bottom),e.maxHeight=Math.min(c,s-e.top);if(e.left<0||e.left+r>a)if(e.maxWidth=Math.min(r,a),o.horizontal==="middle")e.left=n[t.horizontal]>a/2?Math.max(0,a-r):0;else if(n[t.horizontal]>a/2){const f=Math.min(a,t.horizontal==="middle"?n.middle:t.horizontal===o.horizontal?n.right:n.left);e.maxWidth=Math.min(r,f),e.left=Math.max(0,f-e.maxWidth)}else e.left=Math.max(0,t.horizontal==="middle"?n.middle:t.horizontal===o.horizontal?n.left:n.right),e.maxWidth=Math.min(r,a-e.left)}function fe(){const e=A(!_.value);return e.value===!1&&H(()=>{e.value=!0}),{isHydrated:e}}const O=typeof ResizeObserver<"u",D=O===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},He=F({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:n}){let i=null,t,o={width:-1,height:-1};function c(s){s===!0||e.debounce===0||e.debounce==="0"?r():i===null&&(i=setTimeout(r,e.debounce))}function r(){if(i!==null&&(clearTimeout(i),i=null),t){const{offsetWidth:s,offsetHeight:a}=t;(s!==o.width||a!==o.height)&&(o={width:s,height:a},n("resize",o))}}const{proxy:d}=k();if(d.trigger=c,O===!0){let s;const a=f=>{t=d.$el.parentNode,t?(s=new ResizeObserver(c),s.observe(t),r()):f!==!0&&P(()=>{a(!0)})};return H(()=>{a()}),z(()=>{i!==null&&clearTimeout(i),s!==void 0&&(s.disconnect!==void 0?s.disconnect():t&&s.unobserve(t))}),K}else{let s=function(){i!==null&&(clearTimeout(i),i=null),h!==void 0&&(h.removeEventListener!==void 0&&h.removeEventListener("resize",c,y.passive),h=void 0)},a=function(){s(),t?.contentDocument&&(h=t.contentDocument.defaultView,h.addEventListener("resize",c,y.passive),r())};const{isHydrated:f}=fe();let h;return H(()=>{P(()=>{t=d.$el,t&&a()})}),z(s),()=>{if(f.value===!0)return ee("object",{class:"q--avoid-card-border",style:D.style,tabindex:-1,type:"text/html",data:D.url,"aria-hidden":"true",onLoad:a})}}}}),{passive:I}=y,he=["both","horizontal","vertical"],ze=F({name:"QScrollObserver",props:{axis:{type:String,validator:e=>he.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ie},emits:["scroll"],setup(e,{emit:n}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,o,c;x(()=>e.scrollTarget,()=>{s(),d()});function r(){t?.();const h=Math.max(0,le(o)),g=oe(o),l={top:h-i.position.top,left:g-i.position.left};if(e.axis==="vertical"&&l.top===0||e.axis==="horizontal"&&l.left===0)return;const u=Math.abs(l.top)>=Math.abs(l.left)?l.top<0?"up":"down":l.left<0?"left":"right";i.position={top:h,left:g},i.directionChanged=i.direction!==u,i.delta=l,i.directionChanged===!0&&(i.direction=u,i.inflectionPoint=i.position),n("scroll",{...i})}function d(){o=ne(c,e.scrollTarget),o.addEventListener("scroll",a,I),a(!0)}function s(){o!==void 0&&(o.removeEventListener("scroll",a,I),o=void 0)}function a(h){if(h===!0||e.debounce===0||e.debounce==="0")r();else if(t===null){const[g,l]=e.debounce?[setTimeout(r,e.debounce),clearTimeout]:[requestAnimationFrame(r),cancelAnimationFrame];t=()=>{l(g),t=null}}}const{proxy:f}=k();return x(()=>f.$q.lang.rtl,r),H(()=>{c=f.$el.parentNode,d()}),z(()=>{t?.(),s()}),Object.assign(f,{trigger:a,getPosition:()=>i}),K}});export{He as Q,we as a,be as b,pe as c,xe as d,re as e,ze as f,ge as g,Te as p,ye as r,de as s,ae as u,Ee as v};
