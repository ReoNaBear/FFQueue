import{c as $,a,h as u,b as F,g as k,i as N,e as x,l as O,r as y,w as z,o as j,d as E,p as U,f as I,j as K,k as Q,m as M,n as A,q as D,s as G,t as S,u as J,v as _,x as X}from"./index-yubK24W7.js";import{Q as V,a as Y}from"./QScrollObserver-DkyDXqDh.js";import{g as P}from"./scroll-2PisXHgm.js";const Z=$({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:h}){const r=a(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>u("div",{class:r.value},F(h.default))}}),ee=$({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:h}){const r=a(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>u("div",{class:r.value,role:"toolbar"},F(h.default))}}),te=$({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:h,emit:r}){const{proxy:{$q:n}}=k(),l=N(O,x);if(l===x)return console.error("QHeader needs to be child of QLayout"),x;const i=y(parseInt(e.heightHint,10)),d=y(!0),w=a(()=>e.reveal===!0||l.view.value.indexOf("H")!==-1||n.platform.is.ios&&l.isContainer.value===!0),p=a(()=>{if(e.modelValue!==!0)return 0;if(w.value===!0)return d.value===!0?i.value:0;const t=i.value-l.scroll.value.position;return t>0?t:0}),c=a(()=>e.modelValue!==!0||w.value===!0&&d.value!==!0),C=a(()=>e.modelValue===!0&&c.value===!0&&e.reveal===!0),L=a(()=>"q-header q-layout__section--marginal "+(w.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(c.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),H=a(()=>{const t=l.rows.value.top,v={};return t[0]==="l"&&l.left.space===!0&&(v[n.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),t[2]==="r"&&l.right.space===!0&&(v[n.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),v});function f(t,v){l.update("header",t,v)}function b(t,v){t.value!==v&&(t.value=v)}function R({height:t}){b(i,t),f("size",t)}function T(t){C.value===!0&&b(d,!0),r("focusin",t)}z(()=>e.modelValue,t=>{f("space",t),b(d,!0),l.animate()}),z(p,t=>{f("offset",t)}),z(()=>e.reveal,t=>{t===!1&&b(d,e.modelValue)}),z(d,t=>{l.animate(),r("reveal",t)}),z(l.scroll,t=>{e.reveal===!0&&b(d,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const q={};return l.instances.header=q,e.modelValue===!0&&f("size",i.value),f("space",e.modelValue),f("offset",p.value),j(()=>{l.instances.header===q&&(l.instances.header=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const t=E(h.default,[]);return e.elevated===!0&&t.push(u("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(u(V,{debounce:0,onResize:R})),u("header",{class:L.value,style:H.value,onFocusin:T},t)}}}),oe=$({name:"QPageContainer",setup(e,{slots:h}){const{proxy:{$q:r}}=k(),n=N(O,x);if(n===x)return console.error("QPageContainer needs to be child of QLayout"),x;U(I,!0);const l=a(()=>{const i={};return n.header.space===!0&&(i.paddingTop=`${n.header.size}px`),n.right.space===!0&&(i[`padding${r.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(i.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(i[`padding${r.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),i});return()=>u("div",{class:"q-page-container",style:l.value},F(h.default))}}),ne=$({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:h,emit:r}){const{proxy:{$q:n}}=k(),l=y(null),i=y(n.screen.height),d=y(e.container===!0?0:n.screen.width),w=y({position:0,direction:"down",inflectionPoint:0}),p=y(0),c=y(K.value===!0?0:P()),C=a(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),L=a(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),H=a(()=>c.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${c.value}px`}:null),f=a(()=>c.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${c.value}px`,width:`calc(100% + ${c.value}px)`}:null);function b(o){if(e.container===!0||document.qScrollPrevented!==!0){const s={position:o.position.top,direction:o.direction,directionChanged:o.directionChanged,inflectionPoint:o.inflectionPoint.top,delta:o.delta.top};w.value=s,e.onScroll!==void 0&&r("scroll",s)}}function R(o){const{height:s,width:g}=o;let m=!1;i.value!==s&&(m=!0,i.value=s,e.onScrollHeight!==void 0&&r("scrollHeight",s),q()),d.value!==g&&(m=!0,d.value=g),m===!0&&e.onResize!==void 0&&r("resize",o)}function T({height:o}){p.value!==o&&(p.value=o,q())}function q(){if(e.container===!0){const o=i.value>p.value?P():0;c.value!==o&&(c.value=o)}}let t=null;const v={instances:{},view:a(()=>e.view),isContainer:a(()=>e.container),rootRef:l,height:i,containerHeight:p,scrollbarWidth:c,totalWidth:a(()=>d.value+c.value),rows:a(()=>{const o=e.view.toLowerCase().split(" ");return{top:o[0].split(""),middle:o[1].split(""),bottom:o[2].split("")}}),header:Q({size:0,offset:0,space:!1}),right:Q({size:300,offset:0,space:!1}),footer:Q({size:0,offset:0,space:!1}),left:Q({size:300,offset:0,space:!1}),scroll:w,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(o,s,g){v[o][s]=g}};if(U(O,v),P()>0){let o=function(){m=null,B.classList.remove("hide-scrollbar")},s=function(){if(m===null){if(B.scrollHeight>n.screen.height)return;B.classList.add("hide-scrollbar")}else clearTimeout(m);m=setTimeout(o,300)},g=function(W){m!==null&&W==="remove"&&(clearTimeout(m),o()),window[`${W}EventListener`]("resize",s)},m=null;const B=document.body;z(()=>e.container!==!0?"add":"remove",g),e.container!==!0&&g("add"),M(()=>{g("remove")})}return()=>{const o=A(h.default,[u(Y,{onScroll:b}),u(V,{onResize:R})]),s=u("div",{class:C.value,style:L.value,ref:e.container===!0?void 0:l,tabindex:-1},o);return e.container===!0?u("div",{class:"q-layout-container overflow-hidden",ref:l},[u(V,{onResize:T}),u("div",{class:"absolute-full",style:H.value},[u("div",{class:"scroll",style:f.value},[s])])]):s}}}),ie={__name:"MainLayout",setup(e){return(h,r)=>{const n=J("router-view");return G(),D(ne,{view:"hHh lpR fFf",class:"bg-secondary"},{default:S(()=>[_(te,{elevated:"",class:"bg-primary text-white","height-hint":"50"},{default:S(()=>[_(ee,null,{default:S(()=>[_(Z,{class:"text-center text-weight-bold"},{default:S(()=>[...r[0]||(r[0]=[X(" 排隊買周邊σ`∀´)σ ",-1)])]),_:1})]),_:1})]),_:1}),_(oe,null,{default:S(()=>[_(n)]),_:1})]),_:1})}}};export{ie as default};
