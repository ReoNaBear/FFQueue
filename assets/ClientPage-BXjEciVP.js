import{c as L,H as j,I as P,h as y,J as D,g as I,K as O,a as b,L as A,M as f,N as H,s as U,R as E,r as K,o as F,w as Y,B as p,C as n,D as g,O as t,P as c,F as d,S as V,U as R,V as G,W as o,X as r,Q as _,G as x,Y as Q,Z as J,T as W}from"./index-BH5z7AAU.js";import{u as X,a as Z,_ as ee,b as te,Q as le,c as T,d as ie,e as se}from"./_plugin-vue_export-helper-hn1xYbn8.js";import"./scroll-DreyONY2.js";const ae='<path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0.7s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"></path>',oe=L({name:"QSpinnerHearts",props:j,setup(l){const{cSize:i,classes:u}=P(l);return()=>y("svg",{class:u.value,fill:"currentColor",width:i.value,height:i.value,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",innerHTML:ae})}}),ne={xs:8,sm:10,md:14,lg:20,xl:24},$=L({name:"QChip",props:{...X,...D,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(l,{slots:i,emit:u}){const{proxy:{$q:h}}=I(),m=Z(l,h),N=O(l,ne),w=b(()=>l.selected===!0||l.icon!==void 0),q=b(()=>l.selected===!0?l.iconSelected||h.iconSet.chip.selected:l.icon),z=b(()=>l.iconRemove||h.iconSet.chip.remove),k=b(()=>l.disable===!1&&(l.clickable===!0||l.selected!==null)),C=b(()=>{const a=l.outline===!0&&l.color||l.textColor;return"q-chip row inline no-wrap items-center"+(l.outline===!1&&l.color!==void 0?` bg-${l.color}`:"")+(a?` text-${a} q-chip--colored`:"")+(l.disable===!0?" disabled":"")+(l.dense===!0?" q-chip--dense":"")+(l.outline===!0?" q-chip--outline":"")+(l.selected===!0?" q-chip--selected":"")+(k.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(l.square===!0?" q-chip--square":"")+(m.value===!0?" q-chip--dark q-dark":"")}),S=b(()=>{const a=l.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:l.tabindex||0},M={...a,role:"button","aria-hidden":"false","aria-label":l.removeAriaLabel||h.lang.label.remove};return{chip:a,remove:M}});function v(a){a.keyCode===13&&e(a)}function e(a){l.disable||(u("update:selected",!l.selected),u("click",a))}function s(a){(a.keyCode===void 0||a.keyCode===13)&&(U(a),l.disable===!1&&(u("update:modelValue",!1),u("remove")))}function B(){const a=[];k.value===!0&&a.push(y("div",{class:"q-focus-helper"})),w.value===!0&&a.push(y(f,{class:"q-chip__icon q-chip__icon--left",name:q.value}));const M=l.label!==void 0?[y("div",{class:"ellipsis"},[l.label])]:void 0;return a.push(y("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},H(i.default,M))),l.iconRight&&a.push(y(f,{class:"q-chip__icon q-chip__icon--right",name:l.iconRight})),l.removable===!0&&a.push(y(f,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:z.value,...S.value.remove,onClick:s,onKeyup:s})),a}return()=>{if(l.modelValue===!1)return;const a={class:C.value,style:N.value};return k.value===!0&&Object.assign(a,S.value.chip,{onClick:e,onKeyup:v}),A("div",a,B(),"ripple",l.ripple!==!1&&l.disable!==!0,()=>[[E,l.ripple]])}}}),re={key:0,class:"absolute-center text-center"},de={key:1,class:"column flex-center window-height q-pa-lg text-center"},ce={class:"text-subtitle1 text-grey-7 q-mb-xl"},ue={key:2,class:"column flex-center window-height q-pa-lg text-center"},me={class:"text-subtitle1 text-grey-6 q-my-md"},be={class:"text-orange text-weight-bold"},ve={class:"text-primary text-weight-bold"},xe={key:3,class:"column q-gutter-y-md"},he={class:"cute-card relative-position overflow-hidden ticket-container animate-float"},ge={class:"q-pa-lg text-center relative-position"},ye={class:"my-number-text q-my-sm"},fe={class:"q-pa-md bg-orange-1 text-center"},pe={class:"text-h3 text-weight-bolder text-dark"},_e={class:"q-mt-md"},we={class:"q-pb-xl",style:{"padding-bottom":"100px"}},qe={class:"row items-center q-mb-md"},ke={key:0,class:"banner-locked q-pa-md q-mb-md text-center text-grey-7 rounded-borders"},Ce={class:"column q-gutter-y-sm"},Se={class:"col q-pl-sm"},Ne={class:"text-subtitle1 text-weight-bold text-dark"},ze={class:"row items-center q-gutter-x-sm"},Be={class:"text-subtitle1 text-primary text-weight-bolder"},Me={key:1,class:"text-caption text-grey-6"},Qe={key:0,class:"row items-center bg-grey-1 rounded-borders q-pa-xs"},$e={class:"text-h6 q-mx-sm text-weight-bold",style:{"min-width":"24px","text-align":"center"}},Ve={key:1,class:"q-pa-md"},Re={key:0,class:"fixed-bottom q-pa-md glass-footer z-top"},Te={class:"row items-center justify-between"},Le={class:"column"},je={class:"text-h5 text-weight-bolder text-primary"},Pe={class:"fullscreen bg-gradient-gold column flex-center text-center q-pa-md"},De={class:"text-h2 text-weight-bold q-my-lg"},Ie={class:"text-subtitle1 text-grey-8 q-mb-lg"},Oe={class:"text-primary text-weight-bold"},Ae={__name:"ClientPage",setup(l){const i=te(),u=K(!1);F(()=>{i.init()});const h=b(()=>i.myNumber&&i.currentNumber>i.myNumber),m=b(()=>i.myNumber!=null&&i.currentNumber!=null?Math.max(0,i.myNumber-i.currentNumber):999),N=b(()=>m.value==0&&i.currentNumber==i.myNumber),w=v=>v.soldOut||v.qty<=0,q=b(()=>!h.value&&m.value<=5&&m.value>=0);function z(){navigator.vibrate&&navigator.vibrate(50),i.drawNewNumber()}function k(){i.clearMyState(),setTimeout(()=>{i.drawNewNumber()},300)}function C(v,e){navigator.vibrate&&navigator.vibrate(20),i.updateCart(v,e)}function S(){navigator.vibrate&&navigator.vibrate(50),i.submitSelection()}return Y(N,v=>{v&&(u.value=!0)}),(v,e)=>(n(),p(le,{class:"q-pa-md pb-safe relative-position"},{default:g(()=>[e[19]||(e[19]=t("div",{class:"bg-decor"},null,-1)),(n(),c(V,null,R(12,s=>t("div",{key:s,class:"petal",style:G(`left: ${Math.random()*100}vw; width: ${10+Math.random()*15}px; height: ${10+Math.random()*15}px; animation-duration: ${8+Math.random()*10}s; animation-delay: -${Math.random()*10}s`)},null,4)),64)),o(i).isConnected?o(i).myNumber?h.value?(n(),c("div",ue,[d(f,{name:"sentiment_very_dissatisfied",size:"100px",color:"grey-5",class:"q-mb-md"}),e[7]||(e[7]=t("div",{class:"text-h4 text-grey-8 text-weight-bold"},"哎呀！您的號碼已過",-1)),t("div",me,[e[3]||(e[3]=x(" 您的號碼是 ",-1)),t("span",be,r(o(i).myNumber),1),e[4]||(e[4]=t("br",null,null,-1)),e[5]||(e[5]=x(" 目前已經服務到 ",-1)),t("span",ve,r(o(i).currentNumber),1),e[6]||(e[6]=x(" 號 ",-1))]),d(_,{push:"",rounded:"",size:"lg",color:"secondary","text-color":"primary",class:"jelly-btn shadow-3",label:"重新抽取號碼牌",icon:"refresh",onClick:k})])):(n(),c("div",xe,[e[14]||(e[14]=t("div",{class:"text-center q-mt-sm"},[t("div",{class:"text-h5 text-weight-bolder text-primary"},"✨ 排隊選購 ✨"),t("div",null,"ヽ(∀ﾟ )人(ﾟ∀ﾟ)人( ﾟ∀)人(∀ﾟ )人(ﾟ∀ﾟ)人( ﾟ∀)ﾉ")],-1)),t("div",he,[e[11]||(e[11]=t("div",{class:"absolute-top full-width bg-gradient-gold",style:{height:"8px"}},null,-1)),t("div",ge,[e[8]||(e[8]=t("div",{class:"text-subtitle2 text-grey-6 text-weight-bold"},"YOUR NUMBER",-1)),t("div",ye,r(o(i).myNumber),1)]),e[12]||(e[12]=t("div",{class:"row justify-between items-center no-wrap q-px-sm"},[t("div",{class:"circle-cutout"}),t("div",{class:"dashed-line col"}),t("div",{class:"circle-cutout right"})],-1)),t("div",fe,[e[10]||(e[10]=t("div",{class:"text-subtitle1 text-grey-7"},"目前服務號碼 Current Call",-1)),t("div",pe,"No."+r(o(i).currentNumber),1),t("div",_e,[m.value>5?(n(),p($,{key:0,color:"grey-4","text-color":"grey-8",icon:"coffee"},{default:g(()=>[x(" 前方還有 "+r(m.value)+" 組顧客 ",1)]),_:1})):m.value>0?(n(),p($,{key:1,color:"primary","text-color":"white",icon:"hourglass_top"},{default:g(()=>[x(" 即將輪到您！剩 "+r(m.value)+" 組 ",1)]),_:1})):(n(),p($,{key:2,color:"negative","text-color":"white",icon:"stars"},{default:g(()=>[...e[9]||(e[9]=[x(" 輪到您了！請前往櫃檯 ",-1)])]),_:1}))])])]),t("div",we,[t("div",qe,[d(f,{name:"shopping_cart",color:"accent",size:"sm"}),e[13]||(e[13]=t("div",{class:"text-h6 q-ml-sm text-weight-bold text-dark"},"預選您想購買的商品 (可複選)",-1))]),q.value?Q("",!0):(n(),c("div",ke,[d(f,{name:"lock"}),x(" 還有 "+r(m.value)+" 號以上，暫時無法進行預選 ",1)])),t("div",Ce,[(n(!0),c(V,null,R(o(i).products,s=>(n(),c("div",{key:s.id,class:J(["cute-card q-pa-sm row items-center no-wrap",{"opacity-60":w(s)}])},[t("div",Se,[t("div",Ne,r(s.name),1),t("div",ze,[t("div",Be," $"+r(s.price),1),w(s)?(n(),p(T,{key:0,color:"grey-8",label:"已售完",class:"text-weight-bold"})):(n(),c("div",Me,"庫存 "+r(s.qty),1)),s.limit>0?(n(),p(T,{key:2,outline:"",color:"pink-4",class:"bg-pink-1 text-weight-bold"},{default:g(()=>[x(" 限購 "+r(s.limit),1)]),_:2},1024)):Q("",!0)])]),q.value&&!w(s)?(n(),c("div",Qe,[d(_,{round:"",dense:"",flat:"",icon:"remove",color:"grey-7",onClick:B=>C(s.id,-1),disable:!o(i).myCart[s.id]},null,8,["onClick","disable"]),t("div",$e,r(o(i).myCart[s.id]||0),1),d(_,{round:"",dense:"",flat:"",icon:"add",color:"primary",onClick:B=>C(s.id,1),disable:s.qty<=(o(i).myCart[s.id]||0)||s.limit>0&&(o(i).myCart[s.id]||0)>=s.limit},null,8,["onClick","disable"])])):(n(),c("div",Ve,[d(f,{name:"lock",color:"grey-4",size:"sm"})]))],2))),128))])])])):(n(),c("div",de,[e[2]||(e[2]=t("div",{class:"text-h4 text-weight-bolder text-primary q-mb-md"},"歡迎光臨排隊選購 ✨",-1)),t("div",ce,"目前排隊人數 "+r(o(i).queueCount)+" 人",1),d(_,{push:"",rounded:"",size:"xl",color:"primary",class:"jelly-btn shadow-5",label:"抽取排隊號碼牌",icon:"confirmation_number",onClick:z})])):(n(),c("div",re,[d(oe,{color:"primary",size:"4em"})])),d(W,{name:"slide-up"},{default:g(()=>[o(i).myNumber&&!h.value&&q.value?(n(),c("div",Re,[t("div",Te,[t("div",Le,[e[15]||(e[15]=t("div",{class:"text-caption text-grey-7"},"預估總金額 Total",-1)),t("div",je,"$"+r(o(i).cartTotal),1)]),d(_,{push:"",rounded:"",color:"positive",class:"jelly-btn q-px-xl shadow-3",label:o(i).isSubmitted?"更新預選清單":"確認送出預選",icon:o(i).isSubmitted?"update":"check_circle",disable:o(i).cartCount===0,onClick:S},null,8,["label","icon","disable"])])])):Q("",!0)]),_:1}),d(ie,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:g(()=>[t("div",Pe,[d(se,{class:"cute-card q-pa-xl shadow-24"},{default:g(()=>[e[18]||(e[18]=t("div",{class:"text-h4 text-weight-bolder text-primary"},"輪到您了！",-1)),t("div",De,"No."+r(o(i).myNumber),1),t("div",Ie,[e[16]||(e[16]=x(" 請帶著您的手機前往櫃檯結帳",-1)),e[17]||(e[17]=t("br",null,null,-1)),t("span",Oe,"預選金額: $"+r(o(i).cartTotal),1)]),d(_,{label:"我現在前往櫃檯",color:"primary",rounded:"",size:"lg",onClick:e[0]||(e[0]=s=>u.value=!1),class:"jelly-btn"})]),_:1})])]),_:1},8,["modelValue"])]),_:1}))}},Ke=ee(Ae,[["__scopeId","data-v-b99eee0d"]]);export{Ke as default};
